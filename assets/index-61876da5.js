(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}})();document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll('input[type="tel"]'),r=function(n){let c="+7 (___) ___-__-__",e=0,o=c.replace(/\D/g,""),s=n.target.value.replace(/\D/g,"");o.length>=s.length&&(s=o),n.target.value=c.replace(/./g,function(a){return/[_\d]/.test(a)&&e<s.length?s.charAt(e++):e>=s.length?"":a})};for(let n of t)for(let c of["input","blur","focus"])n.addEventListener(c,r)});const f=document.querySelector("#location"),y=document.querySelector(".location"),h=document.querySelectorAll(".location-modal__item"),_=document.querySelector(".location__city");function m(){const t=localStorage.getItem("city");t?(document.title=`Tele2 - ${t}`,_.textContent=t):document.title="Tele2 - Санкт-Петербург"}function b(t){localStorage.setItem("city",t)}m();y.addEventListener("click",()=>{f.showModal(),document.body.classList.add("scroll-lock")});function p(t){const r=new KeyframeEffect(t,[{opacity:"0"}],{duration:500,easing:"ease",direction:"normal"}),n=new Animation(r,document.timeline);n.play(),n.onfinish=()=>{t.close(),document.body.classList.remove("scroll-lock")}}h.forEach(t=>{t.addEventListener("click",()=>{p(f),b(t.textContent),m()})});function d(t,r,n){const c=t.querySelector(".instructions__form-feedback"),e=c.querySelectorAll("img");n?(e[0].classList.remove("hidden"),e[1].classList.add("hidden")):(e[1].classList.remove("hidden"),e[0].classList.add("hidden"));const o=c.querySelector("div");o.textContent=r,c.classList.remove("instructions__form-feedback_hidden")}const i=document.querySelector(".form-modal"),v=document.querySelector(".benefit__block-action .btn"),g=document.querySelector(".form-modal .instructions__form-action .btn"),L=document.querySelector(".form-modal input[type='tel']"),k=document.querySelector(".form-modal .instructions__form-feedback"),S=i.querySelector(".instructions__form-checkbox");v.addEventListener("click",()=>{i.showModal(),document.body.classList.add("scroll-lock")});g.addEventListener("click",t=>{t.preventDefault(),L.value.length<18?d(i,"Неправильно введён номер",!1):S.checked?(d(i,"Промокод выслан на ваш номер",!0),setTimeout(()=>{i.querySelector("form").reset(),i.close(),document.body.classList.remove("scroll-lock"),k.classList.add("instructions__form-feedback_hidden")},1e3)):d(i,"Необходимо принять условия соглашения",!1)});const l=document.querySelector(".instructions__form"),q=l.querySelector("input[type='tel']"),w=l.querySelector("input[type='checkbox']"),E=l.querySelector(".instructions__form-action .btn");E.addEventListener("click",t=>{t.preventDefault(),q.value.length<18?d(l,"Неправильно введён номер",!1):w.checked?(d(l,"Промокод выслан на ваш номер",!0),l.reset()):d(l,"Необходимо принять условия соглашения",!1)});const u=document.querySelector(".button-back");u.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});window.addEventListener("scroll",function(){window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-100?u.classList.remove("button-back_hidden"):u.classList.add("button-back_hidden")});
